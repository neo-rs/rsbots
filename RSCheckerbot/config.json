{
  "guild_id": 876528050081251379,
  
  "invite_tracking": {
    "http_server_port": 8080,
    "invite_channel_id": 876560103992594482,
    "fallback_invite": "https://discord.gg/9XcJpEpsBh",
    "whop_logs_channel_id": 1076440941814091787,
    "whop_webhook_channel_id": 1453146723324133477,
    "discord_webhook_url": "",
    "ghl_api_key": "",
    "ghl_location_id": "GmTfoYNHLeHumMfDIset",
    "ghl_cf_discord_username": "",
    "ghl_cf_discord_id": "jY7EMOAS5Kf7CKqMzurw",
    "ghl_cf_lead_id": "",
    "ghl_cf_utm": "",
    "ghl_tag_created": "Discord Invited",
    "ghl_tag_joined": "Discord Joined",
    "ghl_tag_unknown": "Discord Joined (Unknown Invite)"
  },
  
  "dm_sequence": {
    "role_to_assign": 1222877651438407731,
    "role_trigger": 1222877651438407731,
    "welcome_role_id": 1158658514458263592,
    "role_cancel_a": 876569612085518376,
    "role_cancel_b": 1158658514458263592,
    "former_member_role": 1021886425530109994,
    "former_member_delay_seconds": 60,
    "lifetime_role_ids": [
      1221889762575781908
    ],
    "roles_to_check": [
      876598078092754985,
      883907048255942736,
      876588092927115284,
      1337919015992954881,
      1299919622685986817,
      1221889762575781908,
      1222877651438407731,
      876569612085518376,
      1158658514458263592,
      1224748748920328384
    ],
    "send_spacing_seconds": 30.0,
    "day_gap_hours": 24,
    "day7b_delay_min": 30,
    "test_interval_seconds": 10.0,
    "log_first_channel_id": 1144408172757536768,
    "_comment_log_first": "join-logs - Only Day 1 DM events (first contact tracking)",
    "log_other_channel_id": 1358977007030898719,
    "_comment_log_other": "bot-logs - Everything else (days 2-7b, errors, role events, system events)",
    "member_status_logs_channel_id": 1452835008170426368
  },
  "log_controls": {
    "boot_post_min_hours": 6,
    "role_update_batch_seconds": 2,
    "cid_ttl_minutes": 10,
    "verbose_role_lists": false,
    "progress_bar_width": 26,
    "staff_embed_dedupe_seconds": 45,
    "_comment_output": "Optional: route ALL bot output logs to a different guild (e.g. Neo Test Server).",
    "output_guild_id": 0,
    "output_log_other_channel_name": "bot-logs",
    "output_member_status_channel_name": "member-status-logs",
    "output_whop_channel_name": "whop-logs"
  },

  "member_history": {
    "max_events_per_user": 50
  },

  "reporting": {
    "_comment": "Reporting + reminders (DM Neo). Runtime data is stored server-side and not synced.",
    "enabled": true,
    "dm_user_id": 971528709876113478,
    "timezone": "America/New_York",
    "report_time_local": "09:00",
    "weekly_day_local": "mon",
    "retention_weeks": 26,
    "reminder_days_before_cancel": [7, 3, 1],
    "_comment_cancel_output": "Optional: also mirror cancellation reminders into Neo Test Server (no pings).",
    "cancel_reminders_output_guild_id": 1451275225512546497,
    "cancel_reminders_output_channel_name": "set-to-cancel",
    "_comment_canceling_snapshot": "Optional: on startup, query Whop API and post current canceling memberships snapshot into the output channel.",
    "startup_canceling_snapshot_enabled": false,
    "startup_canceling_snapshot_max_pages": 20,
    "startup_canceling_snapshot_per_page": 100,
    "startup_canceling_snapshot_max_rows": 50,
    "startup_canceling_snapshot_min_total_spent_usd": 0.0,
    "_comment_canceling_snapshot_debug": "Optional: verbose per-member startup snapshot logs (PII) for troubleshooting.",
    "startup_canceling_snapshot_log_each_member": false,
    "_comment_canceling_snapshot_output": "Optional: post one embed per canceling member (instead of bundling).",
    "startup_canceling_snapshot_one_message_per_member": false,
    "_comment_canceling_snapshot_clear": "Optional: clear recent bot messages in the canceling snapshot channel before posting a new snapshot.",
    "startup_canceling_snapshot_clear_channel": false,
    "startup_canceling_snapshot_clear_limit": 300,
    "_comment_canceling_snapshot_mirror": "Optional: also mirror the canceling snapshot into additional channels (e.g. case channel in main guild).",
    "startup_canceling_snapshot_mirror_channel_ids": [],
    "startup_canceling_snapshot_mirror_clear_channel": false,
    "startup_canceling_snapshot_mirror_clear_limit": 300,
    "_comment_canceling_snapshot_tickets": "If true, the startup canceling snapshot will open cancellation tickets (dedupe-safe) instead of spamming channels.",
    "startup_canceling_snapshot_create_tickets": true,
    "startup_canceling_snapshot_post_to_channels": false,
    "_comment_canceling_snapshot_totals": "Optional: when total spend is missing, compute from payments API (slower; may rate limit).",
    "startup_canceling_snapshot_fill_total_spend_via_payments": false,
    "startup_canceling_snapshot_payments_sleep_ms": 120,
    "_comment_canceling_snapshot_csv": "Optional: attach a CSV export to the header message in Neo.",
    "startup_canceling_snapshot_attach_csv": true,
    "_comment_canceling_snapshot_filters": "Optional: drop suspicious rows (e.g. very long remaining days, or resolution/dispute payments).",
    "startup_canceling_snapshot_skip_if_remaining_days_gt": 60,
    "startup_canceling_snapshot_skip_payment_status_keywords": ["resolution", "dispute", "chargeback", "under review"],
    "startup_canceling_snapshot_payment_check_limit": 50,
    "_comment_canceling_snapshot_products": "Optional: exclude product titles containing these keywords (case-insensitive).",
    "startup_canceling_snapshot_exclude_product_title_keywords": ["lifetime"],
    "scan_log_channel_id": 0,
    "scan_log_webhook_url": "",
    "scan_log_each_member": false,
    "scan_log_include_raw_dates": false,
    "scan_log_max_members": 0,
    "scan_log_progress_every": 50
  },

  "whop_enrichment": {
    "_comment": "Controls post-then-edit behavior for staff embeds when Whop link is not yet available.",
    "link_timeout_seconds": 90,
    "link_retry_seconds": [2, 5, 10, 20, 30, 60],
    "payment_resumed_recent_hours": 6,
    "_comment_native_backfill": "On startup, scan recent native Whop log cards to populate member_history summaries (no staff spam).",
    "native_backfill_limit": 0,
    "native_backfill_max_days": 30,
    "_comment_startup_smoke": "On startup, parse last N native cards from whop-membership-logs and post a small debug summary (Neo test).",
    "startup_native_smoketest_enabled": false,
    "startup_native_smoketest_count": 25,
    "startup_native_smoketest_source_channel_id": 1453146723324133477,
    "startup_native_smoketest_output_guild_id": 1451275225512546497,
    "startup_native_smoketest_output_channel_id": 1466609169124560946,
    "startup_native_smoketest_output_channel_name": "whop-smoketest",
    "_comment_startup_smoke_samples": "Optional: at startup, also mirror a sample of existing staff cards so you can see 'member joined/left/payment' formats.",
    "startup_smoketest_mirror_staff_samples_enabled": false,
    "startup_smoketest_mirror_staff_samples_history_limit": 200,
    "startup_smoketest_mirror_staff_samples_max_unique_titles": 25
  },
  
  "utm_links": {
    "day_1": "https://dash.resellingsecrets.com/checkout/plan_42Pbxy0i6Y8jX?d2c=true&utm_source=discord&utm_campaign=dm_day_1",
    "day_2": "https://dash.resellingsecrets.com/checkout/plan_42Pbxy0i6Y8jX?d2c=true&utm_source=discord&utm_campaign=dm_day_2",
    "day_3": "https://dash.resellingsecrets.com/checkout/plan_42Pbxy0i6Y8jX?d2c=true&utm_source=discord&utm_campaign=dm_day_3",
    "day_4": "https://dash.resellingsecrets.com/checkout/plan_42Pbxy0i6Y8jX?d2c=true&utm_source=discord&utm_campaign=dm_day_4",
    "day_5": "https://dash.resellingsecrets.com/checkout/plan_42Pbxy0i6Y8jX?d2c=true&utm_source=discord&utm_campaign=dm_day_5",
    "day_6": "https://dash.resellingsecrets.com/checkout/plan_42Pbxy0i6Y8jX?d2c=true&utm_source=discord&utm_campaign=dm_day_6",
    "day_7a": "https://dash.resellingsecrets.com/checkout/plan_rEOS8bM058BiA?d2c=true&utm_source=discord&utm_campaign=dm_day_7a",
    "day_7b": "https://dash.resellingsecrets.com/checkout/plan_rEOS8bM058BiA?d2c=true&utm_source=discord&utm_campaign=dm_day_7b"
  },
  "whop_webhook": {
    "expected_roles": {
      "active": ["Reselling Secrets"],
      "trialing": ["Trial Access"],
      "past_due": [],
      "canceled": [],
      "completed": []
    }
  },
  "future_member_audit": {
    "_comment": "Discord-only role audit helper. Excludes members with these role IDs from candidate selection.",
    "exclude_role_ids": [1406731518969385220]
  },
  "paths": {
    "whop_history": "../RSAdminBot/whop_data/whop_history.json"
  },
  "whop_api": {
    "base_url": "https://api.whop.com/api/v1",
    "company_id": "biz_s58kr1WWnL1bzH",
    "sync_interval_hours": 6,
    "startup_sync_delay_seconds": 180,
    "enable_verification": true,
    "enable_sync": false,
    "_comment_cards_api": "If false, webhook-driven staff cards will NOT call Whop API (they will rely on whop-logs + whop-membership-logs). Scans/sync still use API.",
    "cards_use_api": true,
    "_comment_movement_log": "Whop movement/webhook receipt logs. Sent to a dedicated channel in Neo for easy tracking.",
    "movement_log_enabled": true,
    "movement_log_output_guild_id": 1451275225512546497,
    "movement_log_output_channel_id": 1466959374865137696,
    "movement_log_output_channel_name": "whop-movement-logs",
    "_comment_movement_log_webhook": "Optional: send movement logs via a Discord webhook URL (put in config.secrets.json).",
    "movement_log_webhook_url": "",
    "_comment_unlinked_note": "Shown when a Whop webhook event is detected but the member has not connected Discord in Whop.",
    "unlinked_note": "Discord not linked. Ask the member to connect Discord in Whop: Dashboard -> Connected accounts -> Discord.",
    "_comment_not_in_guild_note": "Shown when Whop shows a linked Discord account, but that Discord user is not found in the Discord server (or cannot be fetched).",
    "not_in_guild_note": "Discord is linked in Whop, but the user is not in the Discord server. Ask them to join/rejoin with the linked Discord account.",
    "_comment_sync_summary": "Optional: mirror Whop sync summary into Neo Test Server.",
    "sync_summary_enabled": true,
    "sync_summary_output_guild_id": 1451275225512546497,
    "sync_summary_output_channel_name": "whop-sync-summary",
    "_comment_sync_summary_file": "Attach a downloadable report file to the Neo sync summary message.",
    "sync_summary_attach_report": true,
    "sync_summary_report_format": "csv",
    "_comment_logs_lookup": "Limit for searching Discord whop-logs history when resolving Discord IDs (anti-rate-limit).",
    "logs_lookup_limit": 250,
    "_comment_joined_report": "For `.checker syncsummary <start> <end>`: filters Whop memberships by JOINED date (excludes draft attempts) and optionally restricts to RS product titles.",
    "joined_report_require_date_joined": false,
    "joined_report_statuses": ["active", "trialing", "canceling", "completed", "canceled", "expired"],
    "joined_report_product_title_prefixes": ["Reselling Secrets"],
    "joined_report_max_pages": 50,
    "_comment_sync_behavior": "Controls what the startup/6h Whop sync is allowed to do.",
    "enforce_role_removals": false,
    "startup_scan_dm_report": true,
    "_comment_auto_heal": "Auto-heal can re-add Members role when Whop shows active+entitled access (no manual role fixes).",
    "auto_heal_add_members_role": true,
    "auto_heal_min_total_spent_usd": 1.0,
    "enable_enrichment": true,
    "payment_case_category_id": 1458533733681598654,
    "payment_case_access_role_ids": []
    ,
    "_comment_dispute_resolution_cases": "Auto-create per-case ticket channels for dispute/resolution payments (webhook-driven).",
    "dispute_case_category_id": 1466815842401386698,
    "resolution_case_category_id": 1466816113525522695,
    "_comment_webhook_receiver": "Whop Developer Webhooks (real-time). Set whop_api.webhook_secret in config.secrets.json and keep webhook_verify=true in production.",
    "webhook_verify": true,
    "webhook_tolerance_seconds": 300,
    "webhook_secret": ""
  }
  ,
  "support_tickets": {
    "_comment": "Discord-native Support CRM tickets (main RS server for now). All IDs are config-driven.",
    "guild_id": 876528050081251379,
    "permissions": {
      "_comment": "Staff can run !transcript/!close and view all ticket channels. Admin roles are optional; administrators are always treated as allowed.",
      "staff_role_ids": [1351371587617558539],
      "_comment_legacy_staff_role_ids": "Optional: remove these legacy staff role overwrites from existing ticket channels on startup (one-time migration).",
      "legacy_staff_role_ids": [],
      "admin_role_ids": [876598078092754985],
      "_comment_include_owner": "When true, the ticket owner can see/respond in their ticket channel.",
      "include_ticket_owner_in_channel": true
    },
    "ticket_roles": {
      "_comment": "Auto-assign roles when a ticket is OPEN; remove on close.",
      "billing_role_id": 1354146761853108225,
      "cancellation_role_id": 1467494664088064174,
      "free_pass_no_whop_role_id": 1467718805365981456,
      "_comment_no_whop_link_role_id": "Role to apply for no_whop_link tickets (Members role present but no Whop linkage recorded).",
      "no_whop_link_role_id": 1467718805365981456,
      "_comment_remove_role_ids_on_no_whop": "Optional: when adding the no-whop role, also remove these role IDs (legacy roles from older versions).",
      "remove_role_ids_on_no_whop": [1467500050341957725]
    },
    "ticket_categories": {
      "billing_category_id": 1467157354977165537,
      "free_pass_category_id": 1467157711685681214,
      "cancellation_category_id": 1467169698608320542,
      "_comment_member_welcome": "Category for 'Member Welcome' tickets (first-time paid members). If id is 0, RSCheckerbot will find/create by name.",
      "member_welcome_category_id": 0,
      "member_welcome_category_name": "member-welcome",
      "_comment_no_whop_link": "Category for 'No Whop Link' tickets. If id is 0, RSCheckerbot will find/create by name.",
      "no_whop_link_category_id": 0,
      "no_whop_link_category_name": "no-whop-link"
    },
    "membership_products": {
      "_comment": "Product-title routing for ticket automation from member-status-logs cards. Match is case-insensitive exact string by default.",
      "lite_product_titles": ["Reselling Secrets (Lite)"],
      "full_product_titles": ["Reselling Secrets"]
    },
    "no_whop_link": {
      "_comment": "Scan current Discord Members-role users and open a ticket when Whop linkage is not recorded.",
      "enabled": false,
      "_comment_linked_detection_mode": "strict = require 'Connected Discord' proof. loose = treat any Whop membership activity as linked (inaccurate by design; clears No-Whop for members who never connected Discord).",
      "linked_detection_mode": "loose",
      "scan_interval_seconds": 21600,
      "_comment_members_role_id": "Discord role ID that represents current paying members (same as dm_sequence.role_cancel_a).",
      "members_role_id": 876569612085518376,
      "_comment_exclude_role_ids": "Do not open no_whop_link tickets for members who have ANY of these roles (e.g., staff/providers).",
      "exclude_role_ids": [1406731518969385220, 876588092927115284],
      "_comment_log_to_member_status_logs": "When true, post a staff card to dm_sequence.member_status_logs_channel_id when a new no_whop_link ticket is opened.",
      "log_to_member_status_logs": true,
      "_comment_whop_api": "Optional: if available, scan Whop /members to detect linked Discord IDs (best-effort; safe fallback if API lacks Discord connection fields).",
      "use_whop_api": true,
      "max_pages": 50,
      "per_page": 100,
      "cooldown_seconds": 86400
    },
    "transcripts": {
      "_comment": "If per-type transcript channel IDs are 0, RSCheckerbot will create/find channels under transcript_category_id by name.",
      "transcript_category_id": 1467169998454788341,
      "cancellation_transcript_channel_id": 0,
      "billing_transcript_channel_id": 0,
      "free_pass_transcript_channel_id": 0
    },
    "free_pass": {
      "what_you_missed_channel_id": 1310420229129764924,
      "preview_limit": 3,
      "auto_delete": {
        "enabled": true,
        "inactivity_seconds": 86400,
        "check_interval_seconds": 600,
        "delete_on_whop_linked": true
      }
    },
    "header_messages": {
      "_comment": "Immediate header message content for ticket channels (shown above the embed/buttons). Placeholders: {member}, {staff}.",
      "templates": {
        "default": "Yo {member}, share what you need help with and {staff} will take it from there.",
        "free_pass": "Hey {member}, if you’re ready to get started, let us know.\nThe {staff} team will help you all the way until you have full access.",
        "free_pass_welcome": "Hey {member}, welcome in.\nThe {staff} team will help you get situated.",
        "billing": "Hey {member}, it looks like there may be an issue with your subscription.\nLet us know what’s going on and {staff} will assist you.",
        "cancellation": "Hey {member}, if you don’t mind, please share a bit about why you decided to cancel.\nOur {staff} team will take a look and see what we can work out.",
        "member_welcome": "Hey {member}, welcome in.\nIf you have any questions or need help getting set up, {staff} is here.",
        "no_whop_link": "Hey {member}, please link your Discord to Whop to avoid losing access.\n{staff} is here if you have any questions or need help."
      }
    },
    "startup_messages": {
      "_comment": "5-minute startup acknowledgement (Pattern A sweeper). Disabled by default.",
      "enabled": true,
      "delay_seconds": 300,
      "_comment_check_interval_seconds": "How often the maintenance loop checks for tickets needing a startup message.",
      "check_interval_seconds": 60,
      "recent_history_limit": 50,
      "templates": {
        "cancellation": "Yo {mention}! Just checking in. We’ve got your cancellation ticket and are taking a look. If you don’t mind sharing what made you decide to cancel, feel free to let us know here.",
        "billing": "Yo {mention}! Just checking in. We’ve got your billing ticket and are looking into it. If you saw an error or tried another payment method, that info can help us resolve this faster.",
        "free_pass": "Yo {mention}! Just checking in. This ticket is here to help you get full access. You’re already seeing some of what we post in what you missed. Once your Whop account is connected, you’ll have full access. Let us know if you need help.",
        "no_whop_link": "## Link Your Discord Account to Whop (Required) <a:rslknock:1247632729948946472>\n### Yo {mention} {staff}, this ticket is here to help you link your Discord to Whop so your access can be tracked correctly.\n### If Discord isn’t connected, Whop can’t sync your membership.\n> ### Step 1: Open Connected Accounts\n> **Make sure you’re logged into Whop, then open:**\n> <https://whop.com/@me/settings/connected-accounts/>\n> ### Step 2: Connect Discord\n> **On the Connected Accounts page:**\n> * Find Discord  \n> * Click Add Account or Connect  \n> **A new tab will open.**\n> ### Step 3: Authorize Whop\n> **In the new tab:**\n> * Log into the same Discord account you’re using now  \n> * You’ll see a page called Whop Bot  \n> * Scroll down and click Authorize  \n> **You’ll be redirected back to Whop when it’s complete.**\n> ### Mobile Users\n> **If you’re on your phone:**\n> * Open a mobile browser (not inside the Discord app)  \n> * Go to the same link above  \n> * Tap Add Account next to Discord  \n> * Log in and authorize when prompted  \n> ### After You’re Done\n> **Once Discord is connected:**\n> * Come back to this ticket  \n> * Send a quick message saying connected  \n## **We’ll verify it on our end **<:rslgoat1:1247633099450486844>\n\n**Important** <:blamebots:910339769043648582> <#1212099029358608506>\n```We’re now tracking every member directly through Whop to keep access clean and accurate.\nBy the end of this month, members who have not linked their Discord account in Whop may lose access until it’s connected.\nIf that happens or if you run into any issues, open a ticket and we’ll help you get it sorted.```\n-# **Our DEDICATED {staff} will be here to keep nagging you for the rest of the month and help you cook!** <a:pepevbcook:1412558017089503253>"
      }
    },
    "resolution_followup": {
      "_comment": "When a ticket appears resolved (e.g. payment succeeded / membership activated), remove the ticket-role and post a follow-up message in the ticket with close buttons. Auto-close later if no human replies.",
      "enabled": true,
      "auto_close_after_seconds": 1800,
      "templates": {
        "billing": "Looks like your payment went through and your access is active again. If you’re still having issues, reply here — otherwise Support can close this ticket.",
        "cancellation": "Looks like your access is active again. If you’re still having issues, reply here — otherwise Support can close this ticket.",
        "free_pass": "Looks like your Whop is linked and access should be granted. If you’re still not seeing the server, reply here — otherwise Support can close this ticket."
      }
    },
    "audit_logs": {
      "_comment": "Dyno-style audit logs for ticket categories (message create/edit/delete + channel create/update/delete).",
      "enabled": true,
      "_comment_channel_id": "Set to an existing #tickets-logs channel to prevent duplicates.",
      "channel_id": 1467506723790262464,
      "channel_name": "tickets-logs",
      "include_transcript_category": false
    },
    "startup_backfill": {
      "_comment": "On startup, scan today's member-status-logs messages and open any missing tickets (restart-safe).",
      "enabled": true,
      "max_messages": 500,
      "_comment_always_scan_today": "When true, re-scan today's member-status-logs on every restart (safe: ticket dedupe + resolved followup dedupe prevent spam).",
      "always_scan_today": true
    },
    "dedupe": {
      "enabled": true,
      "free_pass": { "cooldown_seconds": 86400 },
      "free_pass_welcome": { "cooldown_seconds": 86400 },
      "billing": { "cooldown_seconds": 21600 },
      "cancellation": { "cooldown_seconds": 86400 },
      "member_welcome": { "cooldown_seconds": 86400 }
    },
    "sources": {
      "_comment": "Optional: jump links to the original RSCheckerbot full-log messages (keeps ticket embeds minimal).",
      "membership_logs_channel_id": 0,
      "billing_logs_channel_id": 0,
      "whop_dashboard_base_url": ""
    },
    "member_lookup": {
      "_comment": "Staff-only lookup panel (ephemeral results). Set channel_id to enable.",
      "enabled": true,
      "channel_id": 1468062046166978701,
      "max_native_logs": 5,
      "panel_title": "Client Success Tool",
      "panel_description": "Use the buttons below to look up a member’s Discord + Whop baseline history."
    }
  }
  ,
  "channel_limits": {
    "_comment": "Staff/admin-only slash command + monitoring. Posts channel counts to log_channel_id on create/delete and warns near Discord limits.",
    "enabled": true,
    "log_channel_id": 1468301512244723784,
    "guild_channel_limit": 500,
    "category_limit": 50,
    "warn_threshold_remaining": 10,
    "warn_threshold_percent": 0.95,
    "warn_cooldown_seconds": 1800
  }
  ,
  "member_history_ingest": {
    "_comment": "Optional: auto-ingest Discord whop-logs + whop-membership-logs into member_history.json (resume-safe).",
    "enabled": true,
    "interval_seconds": 300,
    "batch_limit": 500,
    "overlap_messages": 5,
    "_comment_blank_outputs": "When enabled, record any member-status-logs staff cards with blank/— Whop fields into RSCheckerbot/data/blank_outputs.jsonl.",
    "blank_outputs_enabled": true
  }
}

